<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="D√©couvrez la nouvelle radio du valenciennois VAFM et les derni√®res actualit√©s." />
  <title>VAFM - La radio qu'il vous faut</title>
  <link rel="icon" type="image/png" sizes="32x32" href="assets/logo gris vafm.png" />
  <link rel="stylesheet" href="style.css" />
  <script src="principal.js" defer></script>

  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KJSC6Z4M');
  </script>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-QNVR8XET7E"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-QNVR8XET7E');
  </script>
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KJSC6Z4M"
    height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>

  <div class="page-wrapper">
  <header class="top-bar">
    <div class="logo-zone">
      <img src="assets/erasebg-transformed.png" alt="VAFM" class="logo">
    </div>
    <div class="hamburger" id="menuToggle" onclick="toggleMenu()">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </header>

  <!-- Barre noire -->
  <div class="sub-bar"></div>

  <!-- Menu lat√©ral -->
  <nav class="side-menu" id="sideMenu">
    <a href="index.html">Accueil</a>
    <a href="direct.html">√âcouter le direct</a>
    <a href="programmes.html">Programmes</a>
    <a href="histoire.html">Histoire</a>

    <div class="social-links">
      <a href="#"><img src="assets/facebook.png" alt="Facebook"></a>
      <a href="#"><img src="assets/instagram.png" alt="Instagram"></a>
      <a href="#"><img src="assets/youtube.png" alt="YouTube"></a>
      <a href="#"><img src="assets/pinterest.png" alt="Pinterest"></a>
    </div>
  </nav>

    <!-- Contenu principal -->
    <main class="container">
      <!-- Cartes d‚Äôactualit√© -->
      <div class="article-card" onclick="openPopup('popup-braderie')">
        <img src="assets/braderie lille.jpeg" alt="Braderie de Lille" class="card-image" />
        <div class="card-content">
          <h3>Retour sur la Braderie de Lille 2025</h3>
          <p>Ce week-end, la capitale des Flandres a une nouvelle fois vibr√© au rythme de sa c√©l√®bre Braderie...</p>
        </div>
      </div>

      <div class="article-card" onclick="openPopup('popup-recrutement')">
        <img src="assets/vafm-recrute.jpg" alt="VAFM recrute" class="card-image" />
        <div class="card-content">
          <h3>VAFM recrute !</h3>
          <p>La radio VAFM recrute des b√©n√©voles passionn√©s pour rejoindre son √©quipe !</p>
        </div>
      </div>

      <div class="article-card" onclick="openPopup('popup-fresnes')">
        <img src="assets/frs.jpg" alt="Fresnes-sur-Escaut" class="card-image" />
        <div class="card-content">
          <h3>Fresnes-sur-Escaut a vibr√© pour le 15 ao√ªt</h3>
          <p>Concerts, carnaval et feu d‚Äôartifice ont anim√© la Place de la R√©publique...</p>
        </div>
      </div>

      <!-- Bandeau d√©filant -->
      <div class="dedicace-marquee">
        <div class="dedicace-track" id="dedicaceMarquee"></div>
      </div>

      <!-- D√©dicaces en direct -->
      <section class="live-dedicace">
        <h2>D√©dicace</h2>
        <form id="dedicaceForm">
          <input type="text" id="nom" placeholder="Ton pr√©nom ou pseudo" required />
          <textarea id="message" placeholder="Ta d√©dicace..." maxlength="50" required></textarea>
          <p id="charCount">50 caract√®res restants</p>
          <button type="submit">Envoyer</button>
        </form>
        <div id="dedicaceFeed" class="dedicace-feed"></div>
      </section>

      <!-- Pub personnalis√©e -->
      <div style="text-align: center; margin-top: 30px;">
        <a href="https://www.facebook.com/la.touche.personnelle.2024" target="_blank">
          <img src="assets/PUB thomas.png" alt="La Touche Personnelle" style="max-width: 50%; height: auto; border-radius: 12px;" />
        </a>
      </div>
    </main>

    <!-- Popups -->
    <div id="popup-braderie" class="popup hidden">
      <div class="popup-content">
        <span class="close-btn" onclick="closePopup('popup-braderie')">‚úñ</span>
        <img src="assets/braderie lille.jpeg" alt="Braderie de Lille" class="popup-image" />
        <h2>Retour sur la Braderie de Lille 2025</h2>
        <p>Ce week-end, la capitale des Flandres a une nouvelle fois vibr√©...</p>
      </div>
    </div>

    <div id="popup-recrutement" class="popup hidden">
      <div class="popup-content">
        <span class="close-btn" onclick="closePopup('popup-recrutement')">‚úñ</span>
        <img src="assets/vafm-recrute.jpg" alt="VAFM recrute" class="popup-image" />
        <h2>VAFM recrute !</h2>
        <p>La radio VAFM recrute des b√©n√©voles passionn√©s...</p>
      </div>
    </div>

    <div id="popup-fresnes" class="popup hidden">
      <div class="popup-content">
        <span class="close-btn" onclick="closePopup('popup-fresnes')">‚úñ</span>
        <img src="assets/frs.jpg" alt="Fresnes-sur-Escaut" class="popup-image" />
        <h2>Fresnes-sur-Escaut a vibr√© pour le 15 ao√ªt</h2>
        <p>Concerts, carnaval et feu d‚Äôartifice ont anim√© la Place de la R√©publique...</p>
      </div>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
      <div class="footer-content">
        <div class="footer-logo">
          <img src="assets/logo gris vafm.png" style="height: 250px;" />
        </div>
        <div class="footer-links">
          <a href="contact.html">Nous contacter</a>
          <a href="mentions.html">Mentions l√©gales</a>
          <a href="a-propos.html">√Ä propos</a>
          <a href="accessibilite.html">Accessibilit√©</a>
        </div>
      </div>
      <div class="footer-bottom">
        <p>¬© 2025 VAFM | Tous droits r√©serv√©s.</p>
      </div>
    </footer>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const firebaseConfig = {
        apiKey: "AIzaSyBiMcAmaOy9g-5Ail2lmj4adxNBNzW4IGk",
        authDomain: "vafm-dedicaces.firebaseapp.com",
        databaseURL: "https://vafm-dedicaces-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "vafm-dedicaces",
        storageBucket: "vafm-dedicaces.appspot.com",
        messagingSenderId: "553720861929",
        appId: "1:553720861929:web:87739d3bfa41ed5b50cc78"
      };

      firebase.initializeApp(firebaseConfig);
      const db = firebase.database();

      const form = document.getElementById("dedicaceForm");
      const feed = document.getElementById("dedicaceFeed");
      const marquee = document.getElementById("dedicaceMarquee");
      const messageInput = document.getElementById("message");
      const charCount = document.getElementById("charCount");

      if (messageInput && charCount) {
        messageInput.addEventListener("input", () => {
          const max = messageInput.getAttribute("maxlength");
          const current = messageInput.value.length;
          charCount.textContent = `${max - current} caract√®res restants`;
        });
      }

      if (form && feed && marquee) {
        form.addEventListener("submit", e => {
          e.preventDefault();
          const nom = document.getElementById("nom").value.trim();
          const message = messageInput.value.trim();

          const blacklist = [
            "con", "connard", "connasse", "merde", "putain", "salope", "encul√©", "fdp", "ntm", "tg",
            "ta gueule", "nique", "batard", "b√¢tard", "bite", "couille", "p√©tasse", "enfoir√©", "gros con",
            "fils de", "chier", "d√©bile", "abruti", "cr√©tin", "d√©gueulasse", "trou de balle"
          ];

          const contientGrosMot = blacklist.some(mot => message.toLowerCase().includes(mot));
          if (contientGrosMot) {
            alert("Ton message contient un mot interdit. Merci de rester respectueux !");
            return;
          }

          if (nom && message) {
            db.ref("dedicaces").push({ nom, message });
            form.reset();
            charCount.textContent = "50 caract√®res restants";
          }
        });

        db.ref("dedicaces").on("child_added", snapshot => {
          const data = snapshot.val();

          const div = document.createElement("div");
          div.classList.add("dedicace-entry");
          div.innerHTML = `<strong>${data.nom} :</strong> ${data.message}`;
          feed.prepend(div);

          const span = document.createElement("span");
          span.textContent = ` üéôÔ∏è ${data.nom} : ${data.message}  ‚Ä¢ `;
          marquee.appendChild(span);
        });
      }

      // Menu toggle
      const toggleBtn = document.getElementById("menuToggle");
      const sideMenu = document.getElementById("sideMenu");
      if (toggleBtn && sideMenu) {
        toggleBtn.addEventListener("click", () => {
          sideMenu.classList.toggle("open");
          toggleBtn.classList.toggle("open");
        });
      }

      // Popup functions
      window.openPopup = function(id) {
        const el = document.getElementById(id);
        if (el) el.classList.remove("hidden");
      };

      window.closePopup = function(id) {
        const el = document.getElementById(id);
        if (el) el.classList.add("hidden");
      };
    });
  </script>
<script>
    function toggleMenu() {
      const menu = document.getElementById("sideMenu");
      const toggleBtn = document.getElementById("menuToggle");

      menu.classList.toggle("open");
      toggleBtn.classList.toggle("open");
    }

    const player = document.getElementById('radio-player');
    const equalizer = document.getElementById('equalizer');
    let isPlaying = false;

    function togglePlay() {
      if (!isPlaying) {
        player.play();
        equalizer.classList.remove('hidden');
        isPlaying = true;
      } else {
        player.pause();
        equalizer.classList.add('hidden');
        isPlaying = false;
      }
    }
  </script>
  <!-- Statistiques GoatCounter -->
  <script data-goatcounter="https://vafm.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>
</html>


