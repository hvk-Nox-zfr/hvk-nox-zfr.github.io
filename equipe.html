<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Découvrez la nouvelle radio du valenciennois VAFM et l'équipe." />
  <title>VAFM - Notre équipe</title>
  <script src="principal.js" defer></script>
  <link rel="icon" type="image/png" sizes="32x32" href="assets/VAFM logo rouge.png" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="equipe.css" />

  <!-- Précharger la première image pour priorité d'affichage -->
  <link rel="preload" as="image" href="assets/1.png">

  <style>
    .img-error { background:#f4f4f4 url('assets/fallback.png') center/contain no-repeat; min-height:160px; }
  </style>
  
</head>
<body>
  <div class="page-wrapper">
    <header class="top-bar">
      <div class="logo-zone">
        <img src="assets/erasebg-transformed.png" alt="VAFM" class="logo">
      </div>
      <div class="hamburger" id="menuToggle" onclick="toggleMenu()">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </header>

    <div class="sub-bar"></div>

    <nav class="side-menu" id="sideMenu">
      <a href="index.html">Accueil</a>
      <a href="equipe.html">Notre équipe</a>
      <a href="direct.html">Écouter le direct</a>
      <a href="programmes.html">Programmes</a>
      <a href="histoire.html">Histoire</a>
      <a href="don.html">Don</a>
      <div class="social-links">
        <a href="https://www.facebook.com/profile.php?id=61573373138285"><img src="assets/facebook.png" alt="Facebook"></a>
        <a href="https://www.instagram.com/vafmlaradio/"><img src="assets/instagram.png" alt="Instagram"></a>
        <a href="https://www.youtube.com/@VAFMlaradio"><img src="assets/youtube.png" alt="YouTube"></a>
        <a href="https://www.tiktok.com/@vafmlaradio"><img src="assets/tiktok.png" alt="TikTok"></a>
      </div>
    </nav>
<!-- Galerie horizontale centrée -->
<section class="team-row" aria-label="Notre équipe">
  <div class="team-row-inner">
    <figure class="team-card">
      <img src="assets/1.png" alt="Thomas - Directeur Général" width="360" height="264" onerror="this.onerror=null;this.classList.add('img-error');this.removeAttribute('src');" />
      <figcaption>Thomas — Directeur Général</figcaption>
    </figure>

    <figure class="team-card">
      <img src="assets/2.png" alt="Hugo - Directeur adjoint" width="360" height="264" onerror="this.onerror=null;this.classList.add('img-error');this.removeAttribute('src');" />
      <figcaption>Hugo — Directeur adjoint</figcaption>
    </figure>

    <!-- Ajoute d'autres <figure class="team-card"> ici si besoin -->
  </div>
</section>

<style>
  /* Conteneur centré */
  .team-row { display:flex; justify-content:center; padding:20px 12px; }
  .team-row-inner {
    display:flex;
    gap:20px;               /* espacement entre images */
    align-items:center;
    justify-content:center;
    flex-wrap:wrap;         /* passe en ligne suivante sur petits écrans */
    max-width:1100px;
    width:100%;
    box-sizing:border-box;
  }

  /* Carte image + légende */
  .team-card {
    display:flex;
    flex-direction:column;
    align-items:center;
    text-align:center;
    background:transparent;
    border-radius:8px;
    overflow:hidden;
    min-width:220px;        /* taille minimale */
  }

  .team-card img {
    display:block;
    width:100%;
    max-width:360px;        /* largeur max par carte */
    height:auto;
    aspect-ratio: 360/264;  /* préserve ratio pour éviter les sauts */
    object-fit:cover;
    border-radius:8px;
  }

  .team-card figcaption {
    margin-top:10px;
    color:#222;
    font-size:0.95rem;
    line-height:1.1;
  }

  /* fallback visuel quand src introuvable */
  .img-error {
    background:#f4f4f4 url('assets/fallback.png') center/contain no-repeat;
    min-height:180px;
  }

  /* Responsive : on réduit les cartes sur petits écrans */
  @media (max-width:760px) {
    .team-row-inner { gap:12px; }
    .team-card img { max-width:280px; aspect-ratio: 280/210; }
  }

  @media (max-width:420px) {
    .team-card img { max-width:100%; }
    .team-card { width:100%; }
  }
</style>

    <!-- Footer -->
<footer class="site-footer">
  <div class="footer-content">
    <div class="footer-logo">
      <img src="assets/logo gris vafm.png" style="height:250px;" alt="Logo VAFM" />
    </div>
    <div class="footer-links">
      <a href="contact.html">Nous contacter</a>
      <a href="mentions.html">Mentions légales</a>
      <a href="a-propos.html">À propos</a>
      <a href="accessibilite.html">Accessibilité</a>
      <a href="politique.html">Politique de confidentialité</a>
    </div>
  </div>
  <div class="footer-bottom">
    <p>© 2025 VAFM | Tous droits réservés.</p>
  </div>
</footer>
  </div>

  <script>
  // Principal JS pour carousel et menu (autonome)
  (function(){
    // menu toggle
    const menuToggle = document.getElementById('menuToggle');
    const sideMenu = document.getElementById('sideMenu');
    if (menuToggle && sideMenu) {
      menuToggle.addEventListener('click', () => {
        const isOpen = sideMenu.style.display === 'block';
        sideMenu.style.display = isOpen ? 'none' : 'block';
        sideMenu.setAttribute('aria-hidden', String(isOpen));
      });
      menuToggle.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') menuToggle.click();
      });
    }

    // carousel
    const track = document.getElementById('carouselTrack');
    if (!track) return;
    const items = Array.from(track.children);
    const prevBtn = document.querySelector('.carousel-btn.prev');
    const nextBtn = document.querySelector('.carousel-btn.next');
    const dotsContainer = document.getElementById('carouselDots');
    let index = 0;
    let autoplayId = null;
    const AUTOPLAY_DELAY = 4000; // ms
    const PAUSE_ON_HOVER = true;

    function itemWidth() {
      const gap = parseInt(getComputedStyle(track).gap || 16, 10) || 16;
      return items[0].getBoundingClientRect().width + gap;
    }

    function visibleCount() {
      const wrapperWidth = document.querySelector('.carousel-track-wrapper').offsetWidth;
      return Math.max(1, Math.floor(wrapperWidth / itemWidth()));
    }

    function createDots() {
      if (!dotsContainer) return;
      dotsContainer.innerHTML = '';
      const groups = Math.max(1, Math.ceil(items.length / visibleCount()));
      for (let i=0;i<groups;i++){
        const dot = document.createElement('button');
        dot.type = 'button';
        dot.className = 'carousel-dot';
        dot.setAttribute('aria-label', `Aller à ${i+1}`);
        dot.addEventListener('click', () => goToSlide(i * visibleCount()));
        dotsContainer.appendChild(dot);
      }
    }

    function updateButtons() {
      if (prevBtn) prevBtn.disabled = index === 0;
      if (nextBtn) nextBtn.disabled = index >= items.length - visibleCount();
      const dots = Array.from(dotsContainer?.children || []);
      dots.forEach(d=>d.classList.remove('active'));
      const activeDot = dots[Math.min(index, dots.length-1)];
      if (activeDot) activeDot.classList.add('active');
    }

    function goToSlide(i) {
      index = Math.max(0, Math.min(i, items.length - visibleCount()));
      track.style.transform = `translateX(-${index * itemWidth()}px)`;
      updateButtons();
    }

    prevBtn && prevBtn.addEventListener('click', ()=> goToSlide(index - 1));
    nextBtn && nextBtn.addEventListener('click', ()=> goToSlide(index + 1));

    // keyboard navigation
    document.addEventListener('keydown', e => {
      if (e.key === 'ArrowLeft') prevBtn && prevBtn.click();
      if (e.key === 'ArrowRight') nextBtn && nextBtn.click();
    });

    // autoplay
    function startAutoplay(){
      stopAutoplay();
      autoplayId = setInterval(()=> {
        const next = (index + visibleCount()) >= items.length ? 0 : index + visibleCount();
        goToSlide(next);
      }, AUTOPLAY_DELAY);
    }
    function stopAutoplay(){ if (autoplayId) { clearInterval(autoplayId); autoplayId = null; } }

    // pause on hover
    if (PAUSE_ON_HOVER){
      const carousel = document.getElementById('teamCarouselEnhanced');
      if (carousel) {
        carousel.addEventListener('mouseenter', stopAutoplay);
        carousel.addEventListener('mouseleave', startAutoplay);
      }
    }

    // responsive init
    window.addEventListener('resize', () => {
      createDots();
      goToSlide(index);
    });

    // init
    createDots();
    goToSlide(0);
    startAutoplay();

    // ensure images are loaded for layout stability: if first images not loaded, retry transform after a short delay
    window.addEventListener('load', () => setTimeout(()=> goToSlide(index), 120));
  })();
  </script>
</body>
</html>
